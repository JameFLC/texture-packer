<!DOCTYPE html>
<html lang="en" class="no-transitions">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A simple tool to pack multiple channels into one image !">
    <meta name="color-scheme" content="dark light">
    <link rel="manifest" href="./manifest.json">
    <script src="./assets/js/components/image-input.js" defer></script>
    <script src="./assets/js/components/image-packer.js" defer></script>
    <script src="./assets/js/index.js"></script>
    <link rel="icon" type="image/x-icon" href="./assets/images/logo-rounded.svg">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/images/logo-corner.png" />
    <link rel="stylesheet" href="./assets/css/index.css">
    <title>Texture Packer</title>
</head>

<body id="body">
    <nav class="top-bar">
        <h1>Texture Packer</h1>
        <div class="spacer-extend"></div>
        <p>A simple tool to pack multiple channels into one image !</p>
        <div class="spacer-extend"></div>
        <button onclick="swappTheme()">Swapp Theme</button>
    </nav>

    <section>
        <div class="input-gridd section-element">
            <image-input id="red-input" channel-name="Red"></image-input>
            <image-input id="green-input" channel-name="Green"></image-input>
            <image-input id="blue-input" channel-name="Blue" class="blue-input"></image-input>
            <!-- <image-input id="alpha-input" channel-name="Alpha"></image-input> -->
            <!-- <div class="spacer"></div> -->
        </div>
        <div class="section-element">
            <image-packer id="image-packer"></image-packer>
        </div>
    </section>
</body>
<script>
    // Image Inputs
    const redInput = document.getElementById("red-input");
    const greenInput = document.getElementById("green-input");
    const blueInput = document.getElementById("blue-input");
    //const alphaInput = document.getElementById("alpha-input");

    // Image Packer
    const imagePacker = document.getElementById("image-packer");

    redInput.addEventListener("image-loaded", (event) => {
        const loadedImage = event.detail.image;
        imagePacker.redImage = loadedImage;
    })

    greenInput.addEventListener("image-loaded", (event) => {
        const loadedImage = event.detail.image;
        imagePacker.greenImage = loadedImage;
    })

    blueInput.addEventListener("image-loaded", (event) => {
        const loadedImage = event.detail.image;
        imagePacker.blueImage = loadedImage;
    })

    //alphaInput.addEventListener("image-loaded", (event) => {
    //const loadedImage = event.detail.image;
    //    imagePacker.alphaImage = loadedImage;
    //})
</script>

<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js', { scope: '/texture-packer/' });
    }
</script>

</html>